/*!
 * stroll.js v1.0.0
 * (c) 2016 Joakim Carrilho (Kimoja - https://github.com/Kimoja) 
 * Released under the MIT License.
 */
!function(t){var i=t(window),e={duration:1500,frameRate:1,container:i,velocity:1,on:null,off:null,scroll:null,resize:null,loop:null,interval:0,frames:0,startTime:0,endTime:0,currentTime:0,scrollPos:0,state:0,interpolation:function(t){return Math.sin(t*Math.PI/2)},fx:[function(t){t.el.css("background-position-y",t.current-anim.scrollPos+"px")}]};t.fn.stroll=function(n){function r(){n.currentTime=(new Date).getTime();var i=n.currentTime>n.endTime;i?(clearInterval(n.interval),n.interval=null,n.state=1):n.state=n.interpolation((n.currentTime-n.startTime)/n.frameRate/n.frames),n.loop&&n.loop(),t.each(n.layers,function(){t.each(this,function(){this.current=Math.round(this.last+this.offset*n.state),this.fx.current(this)})}),i&&n.off&&n.off()}function s(i){n.startTime=(new Date).getTime(),n.endTime=n.startTime+n.duration,n.frames=(n.endTime-n.startTime)/n.frameRate,n.scrollPos=n.container.scrollTop(),t.each(n.layers,function(){t.each(this,function(){this.last=this.current,this.offset=this.origin-this.last+n.scrollPos*this.velocity,this.fx.scroll&&this.fx.scroll(this)})}),n.interval||(n.on&&n.on(),n.interval=setInterval(r,n.frameRate)),r(),n.scrool&&n.scrool(i)}function o(i){n.resize&&n.resize(i),t.each(n.layers,function(){t.each(this,function(){this.fx.resize&&this.fx.resize(this,i)})})}var a;if(n)for(a in e)a in n||(n[a]=e[a]);else n=e;return n.fx||(n.fx=t.fn.stroll.defaultFx),n.fx instanceof Array||(n.fx=[n.fx]),n.fx=n.fx.map(function(t){return"function"==typeof t?{current:t}:t}),n.els=this,n.layers=[],n.els.each(function(){var i=t(this),e=[];t.each(n.fx,function(){var t=this.origin?this.origin(i):0,r={el:i,velocity:Number(i.data("stroll-velocity"))||n.velocity,origin:t,current:t,last:0,anim:n,fx:this};e.push(r),this.init&&this.init(r)}),n.layers.push(e)}),i.resize(o),n.container.on("scroll",s),n.init&&n.init(),this}}(jQuery);