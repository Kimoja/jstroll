/*!
 * jstroll.js v1.0.0
 * (c) 2016 Joakim Carrilho (Kimoja - https://github.com/Kimoja) 
 * Released under the MIT License.
 */
!function(t){var e=t(window),i={animate:!0,duration:1500,frameRate:1,container:e,velocity:1,on:null,off:null,scroll:null,resize:null,loop:null,interval:0,frames:0,startTime:0,endTime:0,currentTime:0,scrollPos:0,state:0,interpolation:function(t){return Math.sin(t*Math.PI/2)},fx:[function(t){t.el.css("background-position-y",t.current-t.anim.scrollPos+"px")}]};t.fn.jstroll=function(n){function r(){t.each(n.layers,function(){t.each(this,function(){this.current=Math.round(this.last+this.offset*n.state),this.fx.current(this)})})}function s(){n.currentTime=(new Date).getTime();var t=n.currentTime>=n.endTime;t?(clearInterval(n.interval),n.interval=null,n.state=1):n.state=n.interpolation((n.currentTime-n.startTime)/n.frameRate/n.frames),n.loop&&n.loop(),r(t),t&&n.off&&n.off()}function a(e){n.scrollPos=n.container.scrollTop(),t.each(n.layers,function(){t.each(this,function(){this.last=this.current,this.offset=this.origin-this.last+n.scrollPos*this.velocity,this.fx.scroll&&this.fx.scroll(this)})}),n.animate?(n.startTime=(new Date).getTime(),n.endTime=n.startTime+n.duration,n.frames=(n.endTime-n.startTime)/n.frameRate,n.interval||(n.on&&n.on(),n.interval=setInterval(s,n.frameRate)),n.state=0):n.state=1,n.scrool&&n.scrool(e),r(n.animate)}function o(e){n.resize&&n.resize(e),t.each(n.layers,function(){t.each(this,function(){this.fx.resize&&this.fx.resize(this,e)})})}var l;if(n)for(l in i)l in n||(n[l]=i[l]);else n=Object.create(i);return n.fx instanceof Array||(n.fx=[n.fx]),n.fx=n.fx.map(function(t){return"function"==typeof t?{current:t}:t}),n.els=this.map(function(){return t(this)}),n.layers=[],n.els.each(function(){var e=this,i=[];t.each(n.fx,function(){var t=this.origin?this.origin(e):0,r={el:e,velocity:Number(e.data("stroll-velocity"))||n.velocity,origin:t,current:t,last:0,anim:n,fx:this};i.push(r),this.init&&this.init(r)}),n.layers.push(i)}),e.resize(o),n.container.on("scroll",a),this}}(jQuery);